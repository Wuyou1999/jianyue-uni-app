(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-article_detail-article_detail"],{1302:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".article-title[data-v-1ef29646]{font-weight:700;font-size:22px;margin-bottom:18px}.title-time[data-v-1ef29646]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:10px}.title-time uni-image[data-v-1ef29646]{width:40px;height:40px;border-radius:50%}.read-text[data-v-1ef29646]{color:#6e6e6e}.time-text[data-v-1ef29646]{color:#6e6e6e;float:right\n\t/* padding-top: 35upx; */}.txt[data-v-1ef29646]{margin:10px}.comment-item[data-v-1ef29646]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.right[data-v-1ef29646]{font-size:16px}.grace-text[data-v-1ef29646]{margin-bottom:10px}.butt[data-v-1ef29646]{background-color:#00c777;color:#fff;height:%?70?%;width:%?190?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-align:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.butt1[data-v-1ef29646]{background-color:#e6e6e6;color:#fff;height:%?70?%;width:%?190?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-align:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.butt3[data-v-1ef29646]{background-color:#ea6f5a;color:#fff;height:%?75?%;width:%?190?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-align:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:30px}.butt4[data-v-1ef29646]{background-color:#fff;border:1px solid #ea6f5a;color:#ea6f5a;height:%?75?%;width:%?190?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;text-align:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:30px}.kong[data-v-1ef29646]{width:160px}.nickname[data-v-1ef29646]{font-weight:700}.nickname2[data-v-1ef29646]{padding-top:%?13?%}.lou[data-v-1ef29646]{color:#969696}.send[data-v-1ef29646]{width:60%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:30px;text-align:center;background-color:#ea6f5a;color:#fff}.send[data-v-1ef29646]:hover{background-color:#fff;color:#ea6f5a;border:1px solid #ea6f5a}",""])},"31cc":function(t,e,a){"use strict";a.r(e);var i=a("b194"),n=a("e3de");for(var c in n)"default"!==c&&function(t){a.d(e,t,function(){return n[t]})}(c);a("8aeb");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"1ef29646",null);e["default"]=r.exports},8942:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{article:{aId:0,uId:0,title:"",content:"",avatar:"",nickname:"",createTime:""},comments:[],content:"",userId:uni.getStorageSync("login_key").userId,followed:!1,liked:!1,accordionActive:"grace-accordion-1"}},onLoad:function(t){uni.setNavigationBarTitle({title:"文章详情"}),this.article.aId=t.aId},onShow:function(){this.getArticle()},onPullDownRefresh:function(){this.getArticle()},methods:{changeAccordion:function(t){var e=t.currentTarget.id;this.accordionActive==e&&(e=""),this.accordionActive=e},getArticle:function(){var t=this,e=this;uni.request({url:this.apiServer+"/article/"+this.article.aId,method:"GET",header:{"content-type":"application/x-www-form-urlencoded"},data:{userId:this.userId},success:function(a){e.article.aId=a.data.data.article.id,e.article.uId=a.data.data.article.uid,e.article.title=a.data.data.article.title,e.article.content=a.data.data.article.content,e.article.nickname=a.data.data.article.nickname,e.article.avatar=a.data.data.article.avatar,e.article.createTime=a.data.data.article.createTime,e.comments=a.data.data.comments,"已关注"===a.data.data.followed&&(e.followed=!0),"已喜欢"===a.data.data.Liked&&(e.liked=!0),e.article.createTime=t.handleTime(e.article.createTime);for(var i=0;i<e.comments.length;i++)e.comments[i].commentTime=t.handleTime(e.comments[i].commentTime)},complete:function(){uni.stopPullDownRefresh()}})},handleTime:function(t){var e=new Date(t),a=e.getFullYear(),i=e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():""+e.getDate(),c=e.getHours()<10?"0"+e.getHours():""+e.getHours(),o=e.getMinutes()<10?"0"+e.getMinutes():""+e.getMinutes(),r=e.getSeconds()<10?"0"+e.getSeconds():""+e.getSeconds();return a+"-"+i+"-"+n+" "+c+":"+o+":"+r},send:function(){var t=this;console.log("评论人编号："+this.userId+",文章编号："+this.article.aId+"，评论内容："+this.content),uni.request({url:this.apiServer+"/comment/add",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{aId:this.article.aId,uId:this.userId,content:this.content},success:function(e){0===e.data.code&&(uni.showToast({title:"评论成功"}),t.getArticle(),t.content="")}})},follow:function(){var t=this;uni.request({url:this.apiServer+"/follow/add",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{fromUId:this.userId,toUId:this.article.uId},success:function(e){0===e.data.code&&(uni.showToast({title:"关注成功"}),t.followed=!0)}})},cancelFollow:function(){var t=this;uni.request({url:this.apiServer+"/follow/cancel",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{fromUId:this.userId,toUId:this.article.uId},success:function(e){0===e.data.code&&(uni.showToast({title:"已取消关注"}),t.followed=!1)}})},like:function(){var t=this;uni.request({url:this.apiServer+"/like/add",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{fromUId:this.userId,toAId:this.article.aId},success:function(e){0===e.data.code&&(uni.showToast({title:"已喜欢"}),t.liked=!0)}})},cancelLike:function(){var t=this;uni.request({url:this.apiServer+"/like/cancel",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{fromUId:this.userId,toAId:this.article.aId},success:function(e){0===e.data.code&&(uni.showToast({title:"已取消喜欢"}),t.liked=!1)}})}}};e.default=i},"8aeb":function(t,e,a){"use strict";var i=a("a500"),n=a.n(i);n.a},a500:function(t,e,a){var i=a("1302");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("755f2d68",i,!0,{sourceMap:!1,shadowMode:!1})},b194:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"article-title"},[t._v(t._s(t.article.title))]),a("v-uni-view",{staticClass:"title-time"},[a("v-uni-image",{staticClass:"avatar small",attrs:{src:t.article.avatar}}),a("v-uni-text",{staticClass:"nickname2"},[t._v(t._s(t.article.nickname))]),a("v-uni-view",{staticClass:"kong"}),a("v-uni-view",[t.userId==t.article.uId||t.followed?t._e():a("v-uni-button",{staticClass:"butt",on:{click:function(e){e=t.$handleEvent(e),t.follow(e)}}},[t._v("+关注")])],1),a("v-uni-view",[t.userId!=t.article.uId&&t.followed?a("v-uni-button",{staticClass:"butt1",on:{click:function(e){e=t.$handleEvent(e),t.cancelFollow(e)}}},[t._v("取消关注")]):t._e()],1)],1),a("v-uni-view",{staticClass:"txt"},[a("v-uni-text",{staticClass:"read-text"},[t._v("字数 "+t._s(t.article.content.length)+" · 阅读 "+t._s(t.comments.length))]),a("v-uni-text",{staticClass:"time-text"},[t._v(t._s(t.handleTime(t.article.createTime)))])],1),a("v-uni-view",{staticClass:"grace-text"},[a("v-uni-rich-text",{attrs:{nodes:t.article.content,bindtap:"tap"}})],1),a("v-uni-view",[t.liked?t._e():a("v-uni-button",{staticClass:"butt3",on:{click:function(e){e=t.$handleEvent(e),t.like(e)}}},[t._v("喜欢")])],1),a("v-uni-view",[t.liked?a("v-uni-button",{staticClass:"butt4",on:{click:function(e){e=t.$handleEvent(e),t.cancelLike(e)}}},[t._v("取消")]):t._e()],1),a("v-uni-view",{staticClass:"grace-accordion-items"},[a("v-uni-view",{class:["grace-accordion-2"==t.accordionActive?"grace-accordion-title grace-current":"grace-accordion-title"],attrs:{id:"grace-accordion-2"},on:{click:function(e){e=t.$handleEvent(e),t.changeAccordion(e)}}},[t._v("折叠评论("+t._s(t.comments.length)+")"),"grace-accordion-2"==t.accordionActive?a("v-uni-text",{staticClass:"grace-list-imgs-arrow grace-iconfont icon-arrow-up"}):a("v-uni-text",{staticClass:"grace-list-imgs-arrow grace-iconfont icon-arrow-down"})],1),"grace-accordion-2"==t.accordionActive?a("v-uni-view",{staticClass:"grace-accordion-body"},[a("v-uni-view",{staticClass:"grace-list",staticStyle:{border:"none"}},t._l(t.comments,function(e,i){return a("v-uni-view",{key:i,staticClass:"comment-item"},[a("v-uni-view",{staticClass:"left"},[a("v-uni-image",{staticClass:"avatar small",attrs:{src:e.avatar}})],1),a("v-uni-view",{staticClass:"right"},[a("v-uni-text",{staticClass:"nickname"},[t._v(t._s(e.nickname))]),a("br"),a("v-uni-text",[t._v(t._s(e.content))]),a("v-uni-view",{staticClass:"lou"},[a("v-uni-text",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(t.comments.length-i)+"楼")]),a("v-uni-text",[t._v(t._s(e.commentTime))])],1)],1)],1)}),1)],1):t._e()],1),a("v-uni-input",{staticClass:"uni input comment-box",attrs:{type:"text",placeholder:"写下你的评论",required:"required"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),a("v-uni-button",{staticClass:"send",on:{click:function(e){e=t.$handleEvent(e),t.send(e)}}},[t._v("提交")])],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},e3de:function(t,e,a){"use strict";a.r(e);var i=a("8942"),n=a.n(i);for(var c in i)"default"!==c&&function(t){a.d(e,t,function(){return i[t]})}(c);e["default"]=n.a}}]);